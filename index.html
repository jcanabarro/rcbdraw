<!DOCTYPE html>
<!--suppress ALL -->
<html>

<head>
    <meta charset="utf-8">
    <title>Computação Gráfica :: RCBDraw</title>

    <link rel="stylesheet" type="text/css" href="libs/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="libs/fontawesome/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="libs/vue/bootstrap-vue.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
</head>

<body>
<div id="rcb">
    <rcb-navbar></rcb-navbar>
    <open-modal></open-modal>
    <save-modal></save-modal>
    <export-modal></export-modal>
    <regular-polygon-modal></regular-polygon-modal>
    <light-source-modal></light-source-modal>
    <properties-modal></properties-modal>
    <revolution-modal></revolution-modal>
    <extrusion-modal></extrusion-modal>
    <about-modal></about-modal>
    <toolbar></toolbar>

    <panel ref="panel" identifier="panel"></panel>

    <element-right-click ref="elementRightClick"></element-right-click>

    <panel-right-click ref="panelRightClick"></panel-right-click>
</div>

<script type="text/javascript" src="libs/vue/vue.js"></script>
<script type="text/javascript" src="libs/tether/tether.min.js"></script>
<script type="text/javascript" src="libs/vue/bootstrap-vue.js"></script>
<script type="text/javascript" src="libs/mathjs/math.min.js"></script>

<script type="text/javascript" src="components/OpenModal.js"></script>
<script type="text/javascript" src="components/PropertiesModal.js"></script>
<script type="text/javascript" src="components/RevolutionModal.js"></script>
<script type="text/javascript" src="components/ExtrusionModal.js"></script>
<script type="text/javascript" src="components/SaveModal.js"></script>
<script type="text/javascript" src="components/ExportModal.js"></script>
<script type="text/javascript" src="components/RegularPolygonModal.js"></script>
<script type="text/javascript" src="components/AboutModal.js"></script>
<script type="text/javascript" src="components/RcbNavbar.js"></script>
<script type="text/javascript" src="components/Panel.js"></script>
<script type="text/javascript" src="components/Toolbar.js"></script>
<script type="text/javascript" src="components/ElementRightClick.js"></script>
<script type="text/javascript" src="components/PanelRightClick.js"></script>
<script type="text/javascript" src="components/LightSourceModal.js"></script>

<script type="text/javascript" src="js/Colors.js"></script>
<script type="text/javascript" src="js/Vertex.js"></script>
<script type="text/javascript" src="js/Polygon.js"></script>
<script type="text/javascript" src="js/Solid.js"></script>
<script type="text/javascript" src="js/Scene.js"></script>
<script type="text/javascript" src="js/Interface.js"></script>
<script type="text/javascript" src="js/Edge.js"></script>
<script type="text/javascript" src="js/LightSource.js"></script>
<script type="text/javascript" src="js/Utils/PolyFill.js"></script>
<script type="text/javascript" src="js/Utils/Pipeline.js"></script>
<script type="text/javascript" src="js/Utils/Lighting.js"></script>
<script type="text/javascript" src="js/Utils/FlatShading.js"></script>

<script type="text/javascript">

    const NULL_MODE = -1;
    const PUT_POLY = 1;
    const SELECTION = 2;
    const FREEHAND = 3;
    const TRANSLATE = 4;
    const RESIZE = 5;
    const SHEAR_H = 6;
    const SHEAR_V = 7;
    const ROTATE = 8;
    const MOVE_VRP = 9;
    const PUT_LIGHT = 10;

    window.onload = function () {
        vue = new Vue({
            el: '#rcb'
        });

        drawInterface = new Interface();

        resizeAll(true);

        window.addEventListener('keyup', function (event) {
            if (event.keyCode === 27) { // esc
                escape();
            } else if (event.keyCode === 46) {
                drawInterface.deleteSolid(); // delete
            }
        }, false);

        window.addEventListener('resize', function () {
            resizeAll(false);
        }, false);
    };

    function toggleWireframe () {
        drawInterface.toggleWireframe();
    }

    function getScreenDimensions () {
        return {
            width: window.innerWidth - 310,
            height: window.innerHeight * 0.92
        };
    }

    function resizeAll (isInitialResize = false) {
        vue.$refs.panel.resizeDefault(isInitialResize);
    }

    function escape () {
        toggleReset();
        hideContext();
    }

    function hideContext () {
        vue.$refs.elementRightClick.hide();
        vue.$refs.panelRightClick.hide();
    }

    function definePolygon (sides, size, stroke, fill, mustStroke, mustFill) {
        toggleReset();
        vue.$refs.panel.expectPolygon(sides, size, stroke, fill, mustStroke, mustFill);
    }

    function expectSelection () {
        toggleReset();
        vue.$refs.panel.expectSelection();
    }

    function vrpRotation () {
        vue.$refs.panelPerspective.vrpRotation();
    }

    function expectFreehand () {
        toggleReset();
        vue.$refs.panel.expectFreehand();
    }

    function defineLightSource (ambientIntensity, sourceIntensity) {
        toggleReset();
        vue.$refs.panel.expectLightSource(ambientIntensity, sourceIntensity);
    }

    function toggleReset () {
        vue.$refs.panel.reset();
    }

    function duplicateSelected () {
        if (!drawInterface.isSomethingSelected()) {
            alert('Nenhum objeto selecionado.');
            return;
        }
        drawInterface.duplicateSelected();
    }

    function openRegularPolygonModal () {
        vue.$emit('show::modal', 'regular-polygon-modal');
    }

    function openPropertiesModal () {
        if (!drawInterface.isSomethingSelected()) {
            alert('Nenhum objeto selecionado.');
            return;
        }
        vue.$emit('show::modal', 'properties-modal');
    }

    function openRevolutionModal () {
        if (!drawInterface.isSomethingSelected()) {
            alert('Nenhum objeto selecionado.');
            return;
        }
        vue.$emit('show::modal', 'revolution-modal');
    }

    function openExtrusionModal () {
        if (!drawInterface.isSomethingSelected()) {
            alert('Nenhum objeto selecionado.');
            return;
        }
        vue.$emit('show::modal', 'extrusion-modal');
    }

    function expectRotation () {
        if (!drawInterface.isSomethingSelected()) {
            alert('Nenhum objeto selecionado.');
            return;
        }
        toggleReset();
        vue.$refs.panel.expectRotation();
    }

    function expectTranslate () {
        if (!drawInterface.isSomethingSelected()) {
            alert('Nenhum objeto selecionado.');
            return;
        }
        toggleReset();
        vue.$refs.panel.expectTranslate();
    }

    function expectScale () {
        if (!drawInterface.isSomethingSelected()) {
            alert('Nenhum objeto selecionado.');
            return;
        }
        toggleReset();
        vue.$refs.panel.expectScale();
    }

    function deleteSolid () {
        if (!drawInterface.isSomethingSelected()) {
            alert('Nenhum objeto selecionado.');
            return;
        }
        drawInterface.deleteSolid();
    }

    function bringForward () {
        if (!drawInterface.isSomethingSelected()) {
            alert('Nenhum objeto selecionado.');
            return;
        }
        drawInterface.bringForward();
    }

    function bringBackward () {
        if (!drawInterface.isSomethingSelected()) {
            alert('Nenhum objeto selecionado.');
            return;
        }
        drawInterface.bringBackward();
    }

    function toggleSurfaceHiding () {
        drawInterface.toggleSurfaceHiding();
    }

    function toggleShading () {
        drawInterface.toggleShading();
    }

</script>
</body>

</html>